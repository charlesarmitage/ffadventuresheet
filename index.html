<!DOCTYPE html>
<html lang="en">
	<head>
		<title>FF Adventure Sheet</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" href="css/normalize.min.css">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/bootstrap-theme.min.css">
		<link href='https://fonts.googleapis.com/css?family=Calligraffitti|Tangerine|Merienda+One|Rock+Salt|Architects+Daughter|Courgette' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="css/jquery-ui.min.css">
		<link rel="stylesheet" href="css/adventure-sheet.css">
	</head>
	<body>
		<div class="container">


		<nav class="navbar navbar-default" role="navigation">
  			<div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    			<div class="navbar-header">
    				<h3>
    				<span data-bind="text: 'Name: ' + adventurer.name(), click: adventurer.editName">Name: </span>

    				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
    				<span class="sr-only">Toggle navigation</span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
			        <span class="icon-bar"></span>
    				</button>

    				<p><small>Click name to change name</small></p>
    				</h3>
    			</div>

				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      			<ul class="nav navbar-nav" data-tabs="tabs">
				        <li id="statistics-tab" class="active"><a href="#Statistics" data-toggle="tab">Statistics</a></li>
				        <li><a href="#Items" data-toggle="tab">Items</a></li>
				        <li><a href="#Notes" data-toggle="tab">Notes</a></li>
				        <li><a href="#Fights" data-toggle="tab">Fights</a></li>
				        <li><a href="#Dice" data-toggle="tab">Dice</a></li>
	        		</ul>
        		</div>
    		</div>
    	</nav>


    <div id="my-tab-content" class="tab-content">

        <div class="tab-pane active" id="Statistics">
				<h3>Statistics
				<button class="btn btn-default pull-right" data-bind="click: resetStats">Reset!</button>
        		<button class="btn btn-default pull-right" data-bind="click: startAdventure">Start!</button>
				</h3>
		    <div class="row" data-bind="foreach: adventurer.statistics">
		    	<div class="col-md-4">
		        <div class="panel panel-default">
					<div class="panel-body">
			          <h4>
			          	  <span data-bind="text: name"></span>
				          <div class="btn-group  btn-group pull-right">
		        			<button class="btn btn-default" data-bind="click: incrementStatistic">
		        				<span class="glyphicon glyphicon-plus"></span>
		        			</button>
		        			<button class="btn btn-default" data-bind="click: decrementStatistic">
		        				<span class="glyphicon glyphicon-minus"></span>
		        			</button>
		        			<!--button class="btn btn-default" data-bind="visible: function(){ return name == 'Luck'; }">
		        				<span>Try Luck</span>
		        			</button-->
		        		  </div>			          	
			          </h4>
			          <p>Initial: <span data-bind="text: initialValue"></span></p>
			          <h4>Current: <span data-bind="text: currentValue"></span></h4>
					</div>
				</div>
				</div>
		    </div>
        </div>

        <div class="tab-pane" id="Items">
		    <div class="container">
		      <div class="row">
		        <div class="col-md-4">
		          <h3>Equipment</h3>
					<form role="form">
					  <div class="form-group">
						  <div class="input-group">
						    <input 	type="text" 
						    	   	class="form-control"
						    	   	placeholder=""
						    	   	data-bind="value: ff.adventurer.newEquipmentItem">
				   	   	      <span class="input-group-btn">
			    			    <button class="btn btn-default" type="button" data-bind="click: addItem(ff.adventurer.newEquipmentItem)
			    			    																.to(ff.adventurer.equipmentItemsList)">
			    			    	Add
			    			    </button>
			      			  </span>
						  </div>
					  </div>
					</form>

				    <div class="list-group" data-bind="foreach: ff.adventurer.equipmentItemsList">
						<li class="list-group-item">
							<span data-bind="text: $index"></span>
							<span data-bind="text: $data"></span>
							<button class="btn-sm btn-default pull-right"
									data-bind="click: function(){ ff.adventurer.equipmentItemsList.splice($index, 1) }">
								<i class="glyphicon glyphicon-remove"></i>
							</button>
						</li>
					</div>
				</div>

		        <div class="col-md-4">
		          <h3>Treasure</h3>
					<form role="form">
					  <div class="form-group">
						  <div class="input-group">
						    <input 	type="text" 
						    	   	class="form-control"
						    	   	placeholder=""
						    	   	data-bind="value: ff.adventurer.newTreasureItem">
				   	   	      <span class="input-group-btn">
			    			    <button class="btn btn-default" type="button" data-bind="click: addItem(ff.adventurer.newTreasureItem)
			    			    																.to(ff.adventurer.treasureItemsList)">Add</button>
			      			  </span>
						  </div>
					  </div>
					</form>

				    <div class="list-group" data-bind="foreach: ff.adventurer.treasureItemsList">
						<li class="list-group-item">
							<span data-bind="text: $index"></span>
							<span data-bind="text: $data"></span>
							<button class="pull-right" data-bind="click: function(){ ff.adventurer.treasureItemsList.splice($index, 1) }">
								<i class="glyphicon glyphicon-remove"></i>
							</button>
						</li>
					</div>
				</div>
     		</div>
		</div>
       	</div>

        <div class="tab-pane" id="Notes">
		    <div class="container">
		      <div class="row">
		        <div class="col-md-4">
		          <h3>Notes</h3>
					<form role="form">
					  <div class="form-group">
						  <div class="input-group">
						    <input 	type="text" 
						    	   	class="form-control"
						    	   	placeholder=""
						    	   	data-bind="value: ff.adventurer.newNote">
				   	   	      <span class="input-group-btn">
			    			    <button class="btn btn-default" type="button" data-bind="click: addItem(ff.adventurer.newNote)
			    			    																.to(ff.adventurer.notesList)">Add</button>
			      			  </span>
						  </div>
					  </div>
					</form>

				    <div class="list-group" data-bind="foreach: ff.adventurer.notesList">
						<li class="list-group-item">
							<span data-bind="text: $index"></span>
							<span data-bind="text: $data"></span>
							<button class="pull-right" data-bind="click: function(){ ff.adventurer.notesList.splice($index, 1) }">
								<i class="glyphicon glyphicon-remove"></i>
							</button>
						</li>
					</div>
				</div>

				<div class="col-md-4">
				    <h3>Branch Number</h3>
					<form role="form">
					  <div class="form-group">
					    <input 	type="number" 
					    	   	class="form-control"
					    	   	placeholder="1"
					    	   	data-bind="value: ff.book.branch, valueUpdate:'afterkeydown'">
					  </div>
					</form>
				</div>
	       </div>
		</div>
       </div>

        <div class="tab-pane" id="Fights">
			<h3>Fight: <span data-bind="text: fightResult"></span></h3>
	    <div class="panel panel-default">
		    <div id="monster-edit-dialog"
		    	class="panel-body">
	            <h3>Edit Monster</h3>
	            <b>
	            <span>Name: </span>
				<input class="form-control" placeholder="Optional Name"
					data-bind="value: monsters.currentMonster.name" />
	            <span>Skill:</span>
	            <input class="form-control" type="number" data-bind="value: monsters.currentMonster.skill.currentValue" />
	            <span>Stamina: </span>
	            <input class="form-control" type="number" data-bind="value: monsters.currentMonster.stamina.currentValue" />
	            </b>
	            <button class="btn btn-default" data-bind="click: this.fightMonster">
	            Start
	            </button>
		    </div>
		   	<div id="fight-dialog" 
		   		class="panel-body"
		   		style="display: none;">
		   		<div class="row">
		   			<div class="panel panel-default col-md-6">
				   		<div class="panel-body">
			            <h4 data-bind="text: 'Name: ' + adventurer.name()"></h4>
			            <span data-bind="text: 'Skill: ' + adventurer.skill.currentValue()"></span>
			            <span data-bind="text: 'Stamina: ' + adventurer.stamina.currentValue()"></span>
			            </div>
		            </div>
		            <div class="panel panel-default col-md-6">
				   		<div class="panel-body">
			            <h4 data-bind="text: 'Name: ' + monsters.currentMonster.name()"></h4>
			            <span data-bind="text: 'Skill: ' + monsters.currentMonster.skill.currentValue()"></span>
			            <span data-bind="text: 'Stamina: ' + monsters.currentMonster.stamina.currentValue()"></span>
			            </div>
		            </div>
	            </div>
	            <div class="btn-group">
	            	<button class="btn btn-default" data-bind="click: function(){ attack(monsters.currentMonster, fightResult); }">Attack!</button>
	            	<button class="btn btn-default" data-bind="click: function(){ escape(); }">Escape</button>
	            	<button class="btn btn-default" data-bind="click: function(){ tryLuck(); }">Try Luck</button>
	            	<button class="btn btn-default" data-bind="click: function(){ monsters.currentMonster.initialized(false); }">Cancel</button>
	            </div>
		    </div>
		</div>

		<h3>Defeated Monsters</h3>
	    <ul class="list-group" data-bind="foreach: { data: monsters.defeatedMonsters, as: 'monster' }">
			<li class="list-group-item">
				<span data-bind="text: 'Name: ' + monster.name + ', '"></span>
	        	<span>Skill: </span><span data-bind="text: monster.skill"></span>
	        	<span>Stamina: </span><span data-bind="text: monster.stamina"></span>
				<button class="pull-right" data-bind="click: function(){ monsters.defeatedMonsters.splice($index, 1) }">
					<i class="glyphicon glyphicon-remove"></i>
				</button>
			</li>
		</ul>

        </div>

        <div class="tab-pane" id="Dice">
        	<h3>Dice: <span data-bind="text: ff.book.diceResult"></span></h3>
			<button class="btn btn-default" data-bind="click: rollOneDie()">Roll one die</button>
			<button class="btn btn-default" data-bind="click: rollTwoDice()">Roll two dice</button>
        </div>
    </div>

    
		<div id="statistics-summary">
			<h4>Adventurer: <span data-bind="text: name"></span></h4>
			<div class="row">
			<div class="col-md-3">
			<input class="form-control" placeholder="Click to add name"
					data-bind="visible: adventurer.isNameEditable, value: adventurer.name, hasFocus: adventurer.isNameEditable" />
			</div>
			<h4>
				<div class="ff-stats-bar">
				<div class="stats-bar" data-bind="foreach: adventurer.statistics">
				<div class="col-md-3">
		   			<div class="panel panel-default">
				   		<div class="panel-body">
			            <span data-bind="text: name + ': ' + currentValue() + ' / ' + initialValue()"></span>
			         	<div class="btn-group  btn-group-xs pull-right">
	        			<button class="btn btn-default" data-bind="click: incrementStatistic">
	        				<span class="glyphicon glyphicon-plus"></span>
	        			</button>
	        			<button class="btn btn-default" data-bind="click: decrementStatistic">
	        				<span class="glyphicon glyphicon-minus"></span>
	        			</button>
	        		  </div>
			            </div>
		            </div>
	            </div>
	            </div>
	            </div>
            </h4>
            </div>
        </div>

	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
	<script type='text/javascript' src='js/knockout-3.1.0.js'></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/FFDice.js"></script>
	<script type="text/javascript" src="js/FFBook.js"></script>
	<script type="text/javascript" src="js/FFBattle.js"></script>
	<script type="text/javascript" src="js/FFStatistics.js"></script>
	<script type="text/javascript" src="js/FFMonster.js"></script>
	<script type="text/javascript" src="js/FFAdventurer.js"></script>
	<script type='text/javascript' src='js/adventure-sheet.js'></script>
	<script> 
		ko.applyBindings(AdventureSheetViewModel);


	</script>
	
	</body>
</html>

